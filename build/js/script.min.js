"use strict";function tableGenerator(e,a,t,n,l,r,o,i){var p="",c=0,d="",s="",m="",b="",u="",f="";f=(u=i?(d='"<table cellpadding="+""10""+" border="+""1""+" bordercolor="+""#'+n+'""+" rules="+""all""+">',s='</table>"',m="<tr>",b="</tr>",'<td align="+""center""+" valign="+""center""+" bgcolor="+""#'+t+'""+" height="+""'+r+'""+" width="+""'+l+'""+">'):(d='<table cellpadding="10" border="1" bordercolor="#'+n+'" rules="all">',s="</table>",m="<tr>",b="</tr>",'<td align="center" valign="center" bgcolor="#'+t+'" height="'+r+'" width="'+l+'">'),"</td>"),p+=d;for(var g=0;g<a;g++){p+=m;for(var v=0;v<e;v++)c++,p+=u,"numbering"==o&&(p+=c),p+=f;p+=b}return p+=s}function checkingValues(e,a,t,n){var l=0;if(!1===isNaN(e)&&1===Math.sign(e)?($("#errorCanW").empty(),l++):$("#errorCanW").empty().append("Введите положительное число."),!1===isNaN(a)&&1===Math.sign(a)?($("#errorCanH").empty(),l++):$("#errorCanH").empty().append("Введите положительное число."),!1===isNaN(t)&&1===Math.sign(t)?($("#errorCellW").empty(),l++):$("#errorCellW").empty().append("Введите положительное число."),!1===isNaN(n)&&1===Math.sign(n)?($("#errorCellH").empty(),l++):$("#errorCellH").empty().append("Введите положительное число."),+t<=+e&&+n<=+a&&4==l)return $(".settings__error").empty(),!0;4==l&&($(".settings__error").empty().append("Холст меньше ячейки."),$(".pipTableGen__build-wrap").empty())}var tableCode,planfixformula;function tableResult(){var e,a,t,n,l,r,o,i,p,c,d,s,m,b,u,f,g;dataСleaning(),a=$("#canvas-size-1").val(),e=$("#canvas-size-2").val(),n=$("#cell-size-1").val(),t=$("#cell-size-2").val(),l=$("#cell-color").val(),r=$("#border-color").val(),o=$("#cellContentsOption").val(),i=$("#canvas-name-1").val(),p=$("#canvas-name-2").val(),c=$("#cell-name-1").val(),d=$("#cell-name-2").val(),s=$("#message1").val(),m=$("#message2").val(),+e<+a?+t<+n?(b=Math.floor(a/n),u=Math.floor(e/t),f=+n,g=+t,console.log("1")):(b=Math.floor(a/t),u=Math.floor(e/n),f=+t,g=+n):g=+t<+n?(b=Math.floor(a/t),u=Math.floor(e/n),f=+t,+n):(b=Math.floor(a/n),u=Math.floor(e/t),f=+n,+t),checkingValues(a,e,f,g)&&($(".pipTableGen__col").empty().append(u),$(".pipTableGen__row").empty().append(b),$(".pipTableGen__amount").empty().append(b*u),tableCode=tableGenerator(b,u,l,r,f,g,o,!1),$(".pipTableGen__build-wrap").empty().append(tableCode),$(".pipTableGen__build-wrap").css("min-width",b*f+"px").css("min-height",u*g+"px"),$(".pipTableGen__copy-btn").removeAttr("disabled"),planfixformula=planfixTablesGen(b,u,l,r,f,g,o,!0,i,p,c,d,s,m))}function dataСleaning(){$(".pipTableGen__build-wrap").removeAttr("style"),$(".pipTableGen__copy-btn").attr("disabled",!0),planfixformula=tableCode=""}function planfixTablesGen(e,a,t,n,l,r,o,i,p,c,d,s,m,b){for(var u="если(И("+d+">="+s+";"+p+">="+c+");",f="если(И("+d+">="+s+";"+c+">="+p+");",g="если(И("+s+">="+d+";"+p+">="+c+");",v="если(И("+s+">="+d+";"+c+">="+p+");",$='"'+m+'"',y='"'+b+'"))))',h="",_=1;_<=e;_++)for(var w=1;w<=a;w++)$+=")",u+="если(И(ОКРУГЛВНИЗ(("+p+"/"+d+");0)="+w+";ОКРУГЛВНИЗ(("+c+"/"+s+");0)="+_+");",u+=h=tableGenerator(_,w,t,n,l,r,o,i),u+=";",f+="если(И(ОКРУГЛВНИЗ(("+c+"/"+d+");0)="+w+";ОКРУГЛВНИЗ(("+p+"/"+s+");0)="+_+");",f+=h,f+=";",g+="если(И(ОКРУГЛВНИЗ(("+p+"/"+s+");0)="+w+";ОКРУГЛВНИЗ(("+s+"/"+p+");0)="+_+");",g+=h,g+=";",v+="если(И(ОКРУГЛВНИЗ(("+c+"/"+s+");0)="+w+";ОКРУГЛВНИЗ(("+p+"/"+d+");0)="+_+");",v+=h,v+=";";return u+($+=";")+f+$+g+$+v+$+y}function writeFile(e,a){var t=a;void 0===a&&(t="");var n=document.createElement("a");n.href="data:text/plain;content-disposition=attachment;filename=file,"+t,n.download=e,n.style.display="none",n.id="download",document.body.appendChild(n),document.getElementById("download").click(),document.body.removeChild(n)}$(".trigger").on("click",tableResult),$(".pipTableGen__copy-btn").on("click",function(){navigator.clipboard.writeText(planfixformula).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}),$(".pipTableGen__download-btn").on("click",function(){writeFile("123.txt",planfixformula)}),$(document).ready(function(){/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)?document.documentElement.className+=" old-browser":/Edge\/\d./i.test(navigator.userAgent)&&(document.documentElement.className+=" edge-browser"),$(document).ready(function(){$("select").niceSelect()})});