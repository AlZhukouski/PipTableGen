"use strict";function tableGenerator(e,a,t,n,l,r,o,i){var p="",c=0,d="",s="",b="",m="",u="",f="";f=(u=i?(d='"<table cellpadding="+""10""+" border="+""1""+" bordercolor="+""#'+n+'""+" rules="+""all""+">',s='</table>"',b="<tr>",m="</tr>",'<td align="+""center""+" valign="+""center""+" bgcolor="+""#'+t+'""+" height="+""'+r+'""+" width="+""'+l+'""+">'):(d='<table cellpadding="10" border="1" bordercolor="#'+n+'" rules="all">',s="</table>",b="<tr>",m="</tr>",'<td align="center" valign="center" bgcolor="#'+t+'" height="'+r+'" width="'+l+'">'),"</td>"),p+=d;for(var g=0;g<e;g++){p+=b;for(var v=0;v<a;v++)c++,p+=u,"numbering"==o&&(p+=c),p+=f;p+=m}return p+=s}function checkingValues(e,a,t,n){var l=0;if(!1===isNaN(e)&&1===Math.sign(e)?($("#errorCanW").empty(),l++):$("#errorCanW").empty().append("Введите положительное число."),!1===isNaN(a)&&1===Math.sign(a)?($("#errorCanH").empty(),l++):$("#errorCanH").empty().append("Введите положительное число."),!1===isNaN(t)&&1===Math.sign(t)?($("#errorCellW").empty(),l++):$("#errorCellW").empty().append("Введите положительное число."),!1===isNaN(n)&&1===Math.sign(n)?($("#errorCellH").empty(),l++):$("#errorCellH").empty().append("Введите положительное число."),+t<=+e&&+n<=+a&&4==l)return $(".settings__error").empty(),!0;4==l&&($(".settings__error").empty().append("Холст меньше ячейки."),$(".pipTableGen__build-wrap").empty())}var tableCode,planfixformula;function tableResult(){var e,a,t,n,l,r,o,i,p,c,d,s,b,m,u,f,g;dataСleaning(),a=$("#canvas-size-1").val(),e=$("#canvas-size-2").val(),n=$("#cell-size-1").val(),t=$("#cell-size-2").val(),l=$("#cell-color").val(),r=$("#border-color").val(),o=$("#cellContentsOption").val(),i=$("#canvas-name-1").val(),p=$("#canvas-name-2").val(),c=$("#cell-name-1").val(),d=$("#cell-name-2").val(),s=$("#message1").val(),b=$("#message2").val(),g=+e<+a?+t<+n?(u=Math.floor(a/n),m=Math.floor(e/t),f=+n,+t):(u=Math.floor(a/t),m=Math.floor(e/n),f=+t,+n):+t<+n?(u=Math.floor(a/t),m=Math.floor(e/n),f=+t,+n):(u=Math.floor(a/n),m=Math.floor(e/t),f=+n,+t),checkingValues(a,e,n,t)&&($(".pipTableGen__col").empty().append(u),$(".pipTableGen__row").empty().append(m),$(".pipTableGen__amount").empty().append(m*u),tableCode=tableGenerator(m,u,l,r,f,g,o,!1),$(".pipTableGen__build-wrap").empty().append(tableCode),$(".pipTableGen__build-wrap").css("min-width",m*f+"px").css("min-height",u*g+"px"),$(".pipTableGen__copy-btn").removeAttr("disabled"),planfixformula=planfixTablesGen(m,u,l,r,f,g,o,!0,i,p,c,d,s,b))}function dataСleaning(){$(".pipTableGen__build-wrap").removeAttr("style"),$(".pipTableGen__copy-btn").attr("disabled",!0),planfixformula=tableCode=""}function planfixTablesGen(e,a,t,n,l,r,o,i,p,c,d,s,b,m){for(var u="если(И("+d+">="+s+";"+p+">="+c+");",f="если(И("+d+">="+s+";"+c+">="+p+");",g="если(И("+s+">="+d+";"+p+">="+c+");",v="если(И("+s+">="+d+";"+c+">="+p+");",$='"'+b+'"',y='"'+m+'"))))',h="",_="",w=1;w<=e;w++)for(var G=1;G<=a;G++)$+=")",u+="если(И(ОКРУГЛВНИЗ(("+p+"/"+d+");0)="+G+";ОКРУГЛВНИЗ(("+c+"/"+s+");0)="+w+");",u+=h=tableGenerator(w,G,t,n,l,r,o,i),u+=";",f+="если(И(ОКРУГЛВНИЗ(("+c+"/"+d+");0)="+G+";ОКРУГЛВНИЗ(("+p+"/"+s+");0)="+w+");",f+=_=tableGenerator(G,w,t,n,l,r,o,i),f+=";",g+="если(И(ОКРУГЛВНИЗ(("+p+"/"+s+");0)="+G+";ОКРУГЛВНИЗ(("+s+"/"+p+");0)="+w+");",g+=h,g+=";",v+="если(И(ОКРУГЛВНИЗ(("+c+"/"+s+");0)="+G+";ОКРУГЛВНИЗ(("+p+"/"+d+");0)="+w+");",v+=_,v+=";";return u+($+=";")+f+$+g+$+v+$+y}function writeFile(e,a){var t=a;void 0===a&&(t="");var n=document.createElement("a");n.href="data:text/plain;content-disposition=attachment;filename=file,"+t,n.download=e,n.style.display="none",n.id="download",document.body.appendChild(n),document.getElementById("download").click(),document.body.removeChild(n)}$(".pipTableGen__gen-btn").on("click",tableResult),$(".pipTableGen__copy-btn").on("click",function(){navigator.clipboard.writeText(planfixformula).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}),$(".pipTableGen__download-btn").on("click",function(){writeFile("123.txt",planfixformula)}),$(document).ready(function(){/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)?document.documentElement.className+=" old-browser":/Edge\/\d./i.test(navigator.userAgent)&&(document.documentElement.className+=" edge-browser"),$(document).ready(function(){$("select").niceSelect()})});