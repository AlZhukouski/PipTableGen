"use strict";function tableGenerator(e,a,l,n,t,o,r,i){var p="",c=0,s="",d="",b="",m="",u="",v="";v=(u=i?(s='"<table cellpadding="+""10""+" border="+""1""+" bordercolor="+""#'+n+'""+" rules="+""all""+">',d='</table>"',b="<tr>",m="</tr>",'<td align="+""center""+" valign="+""center""+" bgcolor="+""#'+l+'""+" height="+""'+o+'""+" width="+""'+t+'""+">'):(s='<table cellpadding="10" border="1" bordercolor="#'+n+'" rules="all">',d="</table>",b="<tr>",m="</tr>",'<td align="center" valign="center" bgcolor="#'+l+'" height="'+o+'" width="'+t+'">'),"</td>"),p+=s;for(var $=0;$<e;$++){p+=b;for(var f=0;f<a;f++)c++,p+=u,"numbering"==r&&(p+=c),p+=v;p+=m}return p+=d}function checkingValues(e,a,l,n){var t=0;if(!1===isNaN(e)&&1===Math.sign(e)?($("#errorCanW").empty(),t++):$("#errorCanW").empty().append("Введите положительное число."),!1===isNaN(a)&&1===Math.sign(a)?($("#errorCanH").empty(),t++):$("#errorCanH").empty().append("Введите положительное число."),!1===isNaN(l)&&1===Math.sign(l)?($("#errorCellW").empty(),t++):$("#errorCellW").empty().append("Введите положительное число."),!1===isNaN(n)&&1===Math.sign(n)?($("#errorCellH").empty(),t++):$("#errorCellH").empty().append("Введите положительное число."),+l<=+e&&+n<=+a&&4==t)return $(".settings__error").empty(),!0;4==t&&($(".settings__error").empty().append("Холст меньше ячейки."),$(".pipTableGen__build-wrap").empty())}var tableCode,planfixformula;function tableResult(){var e,a,l,n,t,o,r,i,p,c,s,d,b,m,u,v,f;dataСleaning(),a=$("#canvas-size-1").val(),e=$("#canvas-size-2").val(),n=$("#cell-size-1").val(),l=$("#cell-size-2").val(),t=$("#cell-color").val(),o=$("#border-color").val(),r=$("#cellContentsOption").val(),i=$("#canvas-name-1").val(),p=$("#canvas-name-2").val(),c=$("#cell-name-1").val(),s=$("#cell-name-2").val(),d=$("#message1").val(),b=$("#message2").val(),f=+e<=+a?+l<=+n?(u=Math.floor(a/n),m=Math.floor(e/l),v=+n,+l):(u=Math.floor(a/l),m=Math.floor(e/n),v=+l,+n):+l<=+n?(u=Math.floor(a/l),m=Math.floor(e/n),v=+l,+n):(u=Math.floor(a/n),m=Math.floor(e/l),v=+n,+l),checkingValues(a,e,n,l)&&($(".pipTableGen__col").empty().append(u),$(".pipTableGen__row").empty().append(m),$(".pipTableGen__amount").empty().append(m*u),tableCode=tableGenerator(m,u,t,o,v,f,r,!1),$(".pipTableGen__build-wrap").empty().append(tableCode),$(".pipTableGen__build-wrap").css("min-width",u*v+"px").css("min-height",m*f+"px"),$(".pipTableGen__copy-btn").removeAttr("disabled"),planfixformula=planfixTablesGen(m,u,t,o,v,f,r,!0,i,p,c,s,d,b))}function dataСleaning(){$(".pipTableGen__build-wrap").removeAttr("style"),$(".pipTableGen__copy-btn").attr("disabled",!0),planfixformula=tableCode=""}function planfixTablesGen(e,a,l,n,t,o,r,i,p,c,s,d,b,m){for(var u="если(И("+s+">="+d+";"+p+">="+c+");",v="если(И("+s+">="+d+";"+c+">="+p+");",$="если(И("+d+">="+s+";"+p+">="+c+");",f="если(И("+d+">="+s+";"+c+">="+p+");",g='"'+b+'"',h='"'+m+'"))))',_="",y="",w=1;w<=e;w++)for(var G=1;G<=a;G++)g+=")",u+="если(И(ОКРУГЛВНИЗ(("+p+"/"+s+");0)="+G+";ОКРУГЛВНИЗ(("+c+"/"+d+");0)="+w+");",u+=_=tableGenerator(w,G,l,n,t,o,r,i),u+=";",v+="если(И(ОКРУГЛВНИЗ(("+c+"/"+s+");0)="+G+";ОКРУГЛВНИЗ(("+p+"/"+d+");0)="+w+");",v+=y=tableGenerator(G,w,l,n,t,o,r,i),v+=";",$+="если(И(ОКРУГЛВНИЗ(("+p+"/"+d+");0)="+G+";ОКРУГЛВНИЗ(("+d+"/"+p+");0)="+w+");",$+=_,$+=";",f+="если(И(ОКРУГЛВНИЗ(("+c+"/"+d+");0)="+G+";ОКРУГЛВНИЗ(("+p+"/"+s+");0)="+w+");",f+=y,f+=";";return u+(g+=";")+v+g+$+g+f+g+h}function writeFile(e,a){var l=a;void 0===a&&(l="");var n=document.createElement("a");n.href="data:text/plain;content-disposition=attachment;filename=file,"+l,n.download=e,n.style.display="none",n.id="download",document.body.appendChild(n),document.getElementById("download").click(),document.body.removeChild(n)}function tableResult1(){var e,a,l,n,t,o,r,i,p,c,s;dataСleaning(),a=$("#canvas-size-1").val(),e=$("#canvas-size-2").val(),n=$("#cell-size-1").val(),l=$("#cell-size-2").val(),t=$("#cell-color").val(),o=$("#border-color").val(),r=$("#cellContentsOption").val(),$("#canvas-name-1").val(),$("#canvas-name-2").val(),$("#cell-name-1").val(),$("#cell-name-2").val(),$("#message1").val(),$("#message2").val(),+e<=+a?+l<=+n?(p=Math.floor(a/n),i=Math.floor(e/l),c=+n,s=+l,console.log("1 col="+p+"  cellwidth= "+c)):(p=Math.floor(a/l),i=Math.floor(e/n),c=+l,s=+n,console.log("2 col="+p+"  cellwidth= "+c)):+l<=+n?(p=Math.floor(a/l),i=Math.floor(e/n),c=+l,s=+n,console.log("3 col="+p+"  cellwidth= "+c)):(p=Math.floor(a/n),i=Math.floor(e/l),c=+n,s=+l,console.log("4 col="+p+"  cellwidth= "+c)),checkingValues(a,e,n,l)&&($(".pipTableGen__col").empty().append(p),$(".pipTableGen__row").empty().append(i),$(".pipTableGen__amount").empty().append(i*p),tableCode=tableGenerator(i,p,t,o,c,s,r,!1),$(".pipTableGen__build-wrap").empty().append(tableCode),$(".pipTableGen__build-wrap").css("min-width",p*c+"px").css("min-height",i*s+"px"))}$(".pipTableGen__gen-btn").on("click",tableResult),$(".pipTableGen__copy-btn").on("click",function(){navigator.clipboard.writeText(planfixformula).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}),$(".pipTableGen__download-btn").on("click",function(){writeFile("123.txt",planfixformula)}),$(".pipTableGen__gen-btn-1").on("click",tableResult1),$(document).ready(function(){/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)?document.documentElement.className+=" old-browser":/Edge\/\d./i.test(navigator.userAgent)&&(document.documentElement.className+=" edge-browser"),$(document).ready(function(){$("select").niceSelect()})});