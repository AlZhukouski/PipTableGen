"use strict";function tableGenerator(e,a,t,n,l,r,o,i){var p="",c=0,d="",s="",b="",m="",u="",g="";g=(u=i?(d='"<table cellpadding="+""10""+" border="+""1""+" bordercolor="+""#'+n+'""+" rules="+""all""+">',s='</table>"',b="<tr>",m="</tr>",'<td align="+""center""+" valign="+""center""+" bgcolor="+""#'+t+'""+" height="+""'+r+'""+" width="+""'+l+'""+">'):(d='<table cellpadding="10" border="1" bordercolor="#'+n+'" rules="all">',s="</table>",b="<tr>",m="</tr>",'<td align="center" valign="center" bgcolor="#'+t+'" height="'+r+'" width="'+l+'">'),"</td>"),p+=d;for(var f=0;f<e;f++){p+=b;for(var v=0;v<a;v++)c++,p+=u,"numbering"==o&&(p+=c),p+=g;p+=m}return p+=s}function checkingValues(e,a,t,n){var l=0;if(!1===isNaN(e)&&1===Math.sign(e)?($("#errorCanW").empty(),l++):$("#errorCanW").empty().append("Введите положительное число."),!1===isNaN(a)&&1===Math.sign(a)?($("#errorCanH").empty(),l++):$("#errorCanH").empty().append("Введите положительное число."),!1===isNaN(t)&&1===Math.sign(t)?($("#errorCellW").empty(),l++):$("#errorCellW").empty().append("Введите положительное число."),!1===isNaN(n)&&1===Math.sign(n)?($("#errorCellH").empty(),l++):$("#errorCellH").empty().append("Введите положительное число."),+t<=+e&&+n<=+a&&4==l)return $(".settings__error").empty(),!0;4==l&&($(".settings__error").empty().append("Холст меньше ячейки."),$(".pipTableGen__build-wrap").empty())}var tableCode,planfixformula;function tableResult(){var e,a,t,n,l,r,o,i,p,c,d,s,b,m,u,g,f,v,y;dataСleaning(),a=$("#canvas-size-1").val(),e=$("#canvas-size-2").val(),n=$("#cell-size-1").val(),t=$("#cell-size-2").val(),l=$("#cell-color").val(),r=$("#border-color").val(),o=$("#cellContentsOption").val(),i=$("#canvas-name-1").val(),p=$("#canvas-name-2").val(),c=$("#cell-name-1").val(),d=$("#cell-name-2").val(),s=$("#message1").val(),b=$("#message2").val(),y=+e<+a?+t<+n?(m=Math.floor(a/n),u=Math.floor(e/t),g=+a,f=+e,v=+n,+t):(m=Math.floor(a/t),u=Math.floor(e/n),g=+a,f=+e,v=+t,+n):+t<+n?(m=Math.floor(e/n),u=Math.floor(a/t),g=+e,f=+a,v=+n,+t):(m=Math.floor(e/n),u=Math.floor(a/t),g=+e,f=+a,v=+t,+n),checkingValues(g,f,v,y)&&($(".pipTableGen__col").empty().append(u),$(".pipTableGen__row").empty().append(m),$(".pipTableGen__amount").empty().append(m*u),tableCode=tableGenerator(m,u,l,r,v,y,o,!1),$(".pipTableGen__build-wrap").empty().append(tableCode),$(".pipTableGen__build-wrap").css("min-width",u*v+"px").css("min-height",m*y+"px"),$(".pipTableGen__copy-btn").removeAttr("disabled"),planfixformula=planfixTablesGen(m,u,v,y,g,f,l,r,o,!0,i,p,c,d,s,b))}function dataСleaning(){$(".pipTableGen__build-wrap").removeAttr("style"),$(".pipTableGen__copy-btn").attr("disabled",!0),tableCode=""}function planfixTablesGen(e,a,t,n,l,r,o,i,p,c,d,s,b,m,u,g){for(var f="если(И("+d+">="+s+";"+b+">="+m+");",v="если(И("+d+">="+s+";"+m+">="+b+");",$="если(И("+s+">="+d+";"+b+">="+m+");",y="если(И("+s+">="+d+";"+m+">="+b+");",h='"'+u+'"',_='"'+g+'"))))',w="",C=1;C<=e;C++)for(var G=1;G<=a;G++)h+=")",f+="если(И(ОКРУГЛВНИЗ(("+b+"/"+d+");0)="+G+";ОКРУГЛВНИЗ(("+m+"/"+s+");0)="+C+");",f+=w=tableGenerator(C,G,o,i,t,n,p,c),f+=";",v+="если(И(ОКРУГЛВНИЗ(("+m+"/"+d+");0)="+G+";ОКРУГЛВНИЗ(("+b+"/"+s+");0)="+C+");",v+=w,v+=";",$+="если(И(ОКРУГЛВНИЗ(("+b+"/"+s+");0)="+G+";ОКРУГЛВНИЗ(("+m+"/"+d+");0)="+C+");",$+=w,$+=";",y+="если(И(ОКРУГЛВНИЗ(("+m+"/"+s+");0)="+G+";ОКРУГЛВНИЗ(("+b+"/"+d+");0)="+C+");",y+=w,y+=";";return f+(h+=";")+v+h+$+h+y+h+_}function writeFile(e,a){var t=a;void 0===a&&(t="");var n=document.createElement("a");n.href="data:text/plain;content-disposition=attachment;filename=file,"+t,n.download=e,n.style.display="none",n.id="download",document.body.appendChild(n),document.getElementById("download").click(),document.body.removeChild(n)}$(".trigger").on("click",tableResult),$(".pipTableGen__copy-btn").on("click",function(){navigator.clipboard.writeText(planfixformula).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}),$(".pipTableGen__download-btn").on("click",function(){writeFile("123.txt",planfixformula)}),$(document).ready(function(){/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)?document.documentElement.className+=" old-browser":/Edge\/\d./i.test(navigator.userAgent)&&(document.documentElement.className+=" edge-browser"),$(document).ready(function(){$("select").niceSelect()})});